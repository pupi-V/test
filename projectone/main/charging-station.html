<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—Ä—è–¥–Ω—ã–º–∏ —Å—Ç–∞–Ω—Ü–∏—è–º–∏ ESP32</title>
    <link rel="stylesheet" href="/charging-station.css">
</head>
<body>
    <div id="charging-station-app">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
        <header class="app-header">
            <div class="header-content">
                <div class="brand">
                    <h1>üîå –°–∏—Å—Ç–µ–º–∞ –∑–∞—Ä—è–¥–Ω—ã—Ö —Å—Ç–∞–Ω—Ü–∏–π</h1>
                    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–∞–º–∏ ESP32</p>
                </div>
                <div class="theme-toggle">
                    <button id="theme-btn" onclick="toggleTheme()">üåô</button>
                </div>
            </div>
        </header>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="nav-tabs">
            <button class="tab-btn active" onclick="showTab('dashboard')">üìä –î–∞—à–±–æ—Ä–¥</button>
            <button class="tab-btn" onclick="showTab('board-selector')">üîç –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–ª–∞—Ç</button>
            <button class="tab-btn" onclick="showTab('station-control')">‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–µ–π</button>
        </nav>

        <!-- –í–∫–ª–∞–¥–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞ -->
        <div id="dashboard" class="tab-content active">
            <div class="dashboard-grid">
                <div class="station-card">
                    <h3>–°—Ç–∞–Ω—Ü–∏—è 1</h3>
                    <div class="status online">üü¢ –û–Ω–ª–∞–π–Ω</div>
                    <div class="power-info">
                        <span>–ú–æ—â–Ω–æ—Å—Ç—å: <strong id="power1">0</strong> –∫–í—Ç</span>
                        <span>–¢–∏–ø: <strong>Master</strong></span>
                    </div>
                    <button onclick="selectStation(1)">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
                </div>
                
                <div class="station-card">
                    <h3>–°—Ç–∞–Ω—Ü–∏—è 2</h3>
                    <div class="status offline">üî¥ –û—Ñ–ª–∞–π–Ω</div>
                    <div class="power-info">
                        <span>–ú–æ—â–Ω–æ—Å—Ç—å: <strong>0</strong> –∫–í—Ç</span>
                        <span>–¢–∏–ø: <strong>Slave</strong></span>
                    </div>
                    <button onclick="selectStation(2)" disabled>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–ª–∞—Ç -->
        <div id="board-selector" class="tab-content">
            <div class="board-section">
                <h3>üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ESP32 –ø–ª–∞—Ç</h3>
                <button onclick="scanBoards()" id="scan-btn">–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å</button>
                <div id="scan-results" class="scan-results"></div>
            </div>
            
            <div class="board-section">
                <h3>üîó –†—É—á–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</h3>
                <div class="input-group">
                    <label for="manual-ip">IP –∞–¥—Ä–µ—Å –ø–ª–∞—Ç—ã:</label>
                    <input type="text" id="manual-ip" placeholder="192.168.1.100">
                    <button onclick="connectToBoard()">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞–Ω—Ü–∏–µ–π -->
        <div id="station-control" class="tab-content">
            <div class="control-panel">
                <h3>‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–µ–π <span id="selected-station">1</span></h3>
                
                <div class="control-section">
                    <h4>–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h4>
                    <div class="form-group">
                        <label for="station-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏:</label>
                        <input type="text" id="station-name" value="–°—Ç–∞–Ω—Ü–∏—è 1">
                    </div>
                    
                    <div class="form-group">
                        <label for="max-power">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –º–æ—â–Ω–æ—Å—Ç—å (–∫–í—Ç):</label>
                        <input type="number" id="max-power" value="22" min="0" max="150">
                    </div>
                    
                    <div class="form-group">
                        <label for="station-type">–¢–∏–ø —Å—Ç–∞–Ω—Ü–∏–∏:</label>
                        <select id="station-type">
                            <option value="master">Master</option>
                            <option value="slave">Slave</option>
                        </select>
                    </div>
                </div>

                <div class="control-section">
                    <h4>–°—Ç–∞—Ç—É—Å –∑–∞—Ä—è–¥–∫–∏</h4>
                    <div class="form-group">
                        <label for="charging-status">–°—Ç–∞—Ç—É—Å:</label>
                        <select id="charging-status">
                            <option value="available">–î–æ—Å—Ç—É–ø–Ω–∞</option>
                            <option value="charging">–ó–∞—Ä—è–¥–∫–∞</option>
                            <option value="offline">–û—Ñ–ª–∞–π–Ω</option>
                            <option value="maintenance">–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="current-power">–¢–µ–∫—É—â–∞—è –º–æ—â–Ω–æ—Å—Ç—å (–∫–í—Ç):</label>
                        <input type="number" id="current-power" value="0" min="0" step="0.1">
                    </div>
                </div>

                <div class="control-actions">
                    <button onclick="saveStationConfig()" class="save-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <button onclick="resetStation()" class="reset-btn">üîÑ –°–±—Ä–æ—Å</button>
                    <button onclick="refreshData()" class="refresh-btn">üîÉ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                </div>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è -->
        <div class="status-bar">
            <span>–°—Ç–∞—Ç—É—Å: <span id="connection-status">üü¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ</span></span>
            <span>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="last-update">--:--</span></span>
        </div>
    </div>

    <script src="/charging-station.js"></script>
</body>
</html>