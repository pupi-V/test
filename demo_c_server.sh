#!/bin/bash

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ C-—Å–µ—Ä–≤–µ—Ä–∞
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –±—ç–∫–µ–Ω–¥–∞

echo "=================================================="
echo "–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è C-—Å–µ—Ä–≤–µ—Ä–∞ –∑–∞—Ä—è–¥–Ω—ã—Ö —Å—Ç–∞–Ω—Ü–∏–π"
echo "=================================================="
echo

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–±—Ä–∞–Ω –ª–∏ C-—Å–µ—Ä–≤–µ—Ä
if [ ! -f "server_c/charging_station_server" ]; then
    echo "–°–±–æ—Ä–∫–∞ C-—Å–µ—Ä–≤–µ—Ä–∞..."
    cd server_c
    make clean && make debug
    cd ..
fi

echo "üöÄ –ó–∞–ø—É—Å–∫ C-—Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç—É 5001..."
echo "üìç API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:5001"
echo "üîó –¢–µ—Å—Ç–æ–≤—ã–µ endpoints:"
echo "   GET http://localhost:5001/api/stations"
echo "   POST http://localhost:5001/api/esp32/scan"
echo

# –ó–∞–ø—É—Å–∫–∞–µ–º C-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 5001 —á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å Node.js
PORT=5001 ./server_c/charging_station_server