# Инструкция по установке на ESP32

## Шаг 1: Подготовка оборудования

1. **ESP32** (рекомендуется ESP32-WROOM-32 с минимум 4MB Flash)
2. **USB кабель** для программирования
3. **Компьютер** с установленной Arduino IDE или PlatformIO

## Шаг 2: Установка программного обеспечения

### Вариант A: Arduino IDE
1. Установите Arduino IDE 2.0+
2. Добавьте поддержку ESP32:
   - Файл → Настройки → Дополнительные ссылки для менеджера плат
   - Добавьте: `https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json`
3. Установите плату ESP32: Инструменты → Плата → Менеджер плат → поиск "ESP32"
4. Установите библиотеки:
   - ArduinoJson (версия 6.21.3+)
   - ESP32WebServer (встроена)

### Вариант B: PlatformIO (рекомендуется)
1. Установите VS Code
2. Установите расширение PlatformIO
3. Откройте папку `esp32_deployment` как PlatformIO проект

## Шаг 3: Настройка WiFi

1. Откройте файл `main.cpp`
2. Найдите строки:
   ```cpp
   const char* ssid = "YOUR_WIFI_SSID";
   const char* password = "YOUR_WIFI_PASSWORD";
   ```
3. Замените на ваши данные WiFi

## Шаг 4: Загрузка файлов

### Arduino IDE:
1. Установите плагин ESP32 Sketch Data Upload
2. Поместите файлы из папки `data/` в папку `data/` вашего скетча
3. Инструменты → ESP32 Sketch Data Upload

### PlatformIO:
1. Выполните команду: `pio run --target uploadfs`
2. Или запустите `upload_data.bat` (Windows)

## Шаг 5: Загрузка кода

1. Подключите ESP32 к компьютеру
2. Выберите правильный COM порт
3. Загрузите код `main.cpp`

## Шаг 6: Тестирование

1. Откройте Serial Monitor (115200 baud)
2. ESP32 подключится к WiFi и выведет IP адрес
3. Откройте браузер и перейдите по IP адресу ESP32
4. Вы увидите интерфейс управления зарядными станциями

## Примеры вывода Serial Monitor:

```
WiFi подключен! IP адрес: 192.168.1.100
HTTP сервер запущен
Загружено 2 станций
```

## Устранение проблем

### ESP32 не подключается к WiFi:
- Проверьте правильность SSID и пароля
- Убедитесь, что WiFi сеть использует 2.4GHz (ESP32 не поддерживает 5GHz)
- Проверьте силу сигнала WiFi

### Файлы не загружаются в SPIFFS:
- Убедитесь, что размер файлов не превышает доступное место в SPIFFS
- Проверьте подключение USB кабеля
- Попробуйте другой COM порт

### Веб-интерфейс не открывается:
- Убедитесь, что ESP32 подключен к той же сети
- Проверьте IP адрес в Serial Monitor
- Попробуйте отключить брандмауэр временно

### Ошибки компиляции:
- Убедитесь, что установлены все необходимые библиотеки
- Проверьте версию Arduino IDE или PlatformIO
- Убедитесь, что выбрана правильная плата ESP32

## Дополнительные возможности

### Создание точки доступа (если нет WiFi):
Добавьте в код после подключения к WiFi:
```cpp
// Если WiFi не подключился, создаем точку доступа
if (WiFi.status() != WL_CONNECTED) {
    WiFi.softAP("ESP32-ChargingStation", "12345678");
    Serial.println("Создана точка доступа: ESP32-ChargingStation");
    Serial.print("IP адрес точки доступа: ");
    Serial.println(WiFi.softAPIP());
}
```

### Сохранение конфигурации WiFi:
Для автоматического подключения без прошивки кода, можно добавить WiFiManager библиотеку.

## Ограничения ESP32 версии

- Максимум 10 зарядных станций (ограничение памяти)
- Максимум 4-8 одновременных подключений
- Упрощенный интерфейс (без React фреймворка)
- Ограниченное место для хранения файлов (около 1.5MB в SPIFFS)

## Безопасность

- Добавьте аутентификацию для критических операций
- Используйте HTTPS для production среды
- Ограничьте доступ к административным функциям
- Регулярно обновляйте прошивку ESP32